<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Establishment View</title>
    <link rel="stylesheet" href="../../../public/styles/style.css">
    <link rel="stylesheet" href="../../../public/styles/shared_styles/reviews.css">
    <link rel="stylesheet" href="../../../public/styles/morestyles/restoProfile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/b496b1e4d0.js" crossorigin="anonymous"></script>
    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"> -->

    <style>
        .resto-banner{
            background-image: url("../../../public/images/resto_banner/baconoki_banner.png");
        }
    </style>
</head>

<body>

<!-- header content -->
<div class="header">
    <div class="home">
        <a href="../index.html">ANIMO
            <img style="height: 40px;" src="../../../public/icons/ANIMOEATS_logo.png" alt="jollysnorlax.png" >
            EATS</a>
    </div>
    <div class="navlink"> <a href="../restoList.html">Restaurants</a> </div>
    <div class="profile"><button id="profileBtn"> Log-in <i class="fa fa-solid fa-user"></i></button></div>
</div>

<div id="profileModal" class="modal">
    <div class="modal-content"><b>Existing Profile</b><br>
        <label for="username">
            <input id="username" type="text" placeholder="Username"> <br>
        </label>

        <label for="password">
            <input id="password" type="password" placeholder="Password">
        </label>
        <button id="loginBtn" class="button_dkgreen">Log-in <i class="fa fa-solid fa-user"></i></button>
        <p>Don't have an account yet? <a href="../sign-up.html">Sign-Up</a></p>
    </div>
</div>
<!-- end of header content -->

<script>
    let profileModal = document.getElementById("profileModal");
    let profileBtn = document.getElementById("profileBtn");

    profileBtn.onclick = function() {
        // Show the modal when profile button is clicked
        profileModal.style.display = "flex";
    }

    window.onclick = function(event) {
        // Hide the modal if the click is outside of it
        if (event.target === profileModal) {
            profileModal.style.display = "none";
        }
    }
</script>

<!--Establishment view-->
<main>
    <div class="resto-banner">
        <div class="restaurant-info">
            <h1 class="resto-name"> Baconoki</h1>
            <div class="primary-details">
                <p class="rating">5.0<img class="star-icon" src="../../../public/icons/star.png" alt="star">  (1 reviews)</p>
                <p class="address">456 Gandara Street. Binondo</p>
                <p class="phone">ðŸ“ž0494 209 1217</p>
            </div>
            <div class="supplementary-details">
                <span class="hours">Open 6:00am - 9:00pm</span>
                <span class="price">â‚±60 for one</span>
                <span class="cuisine"> Bacon Enoki Rolls</span>
            </div>
        </div>
    </div>

    <div class="establishment-tabs">
        <div class="tabs__sidebar">
            <button class="tabs__button" data-for-tab="1"> Overview</button>
            <button class="tabs__button" data-for-tab="2"> Menu</button>
            <button class="tabs__button" data-for-tab="3"> Photos</button>
        </div>

        <div class="tabs__content" data-tab="1">
            <p class="establishment-desc">  
                We bring you the perfect fusion of crispy, smoky bacon and delicate, umami-rich enoki mushrooms. Our specialty? Irresistible Bacon Enoki Rolls, carefully crafted to deliver the perfect balance of crunch and juiciness in every bite.

Whether you're craving a savory snack, a protein-packed meal, or a gourmet treat to share, our rolls are grilled to perfection, glazed with house-made sauces, and served fresh off the pan. Pair them with our signature dipping sauces, refreshing beverages, and other flavorful side dishes to elevate your dining experience.
            </p>

            <section class="rating-graph">
                <div class="rating">
                    <div class="rating__average">
                        <h1> <!--In js script--></h1>
                        <div class="star-outer">
                            <div class="star-inner"> <!--In css--></div>
                        </div>
                        <p>  <!--In js script-->  </p>
                    </div>
                    <div class="rating__progress">
                        <!--In js script-->
                    </div>
                </div>
            </section>

            <section class="reviews-holder">
                <h2>Reviews</h2>
                <div class="star-rating-input"> 
                    <span class="fa fa-star "></span>
                    <span class="fa fa-star "></span>
                    <span class="fa fa-star "></span>
                    <span class="fa fa-star "></span>
                    <span class="fa fa-star "></span>
                </div>
                
                <input class="leave-review-bar" style="font-size: 19.2px; width: auto;" type="text" placeholder="Leave a review..">
                <button id="submit-review" class="button_dkgreen" style="font-size: 19.2px"> submit </button>

                <article class="reviews">
                    <div id="review1" class="review-container">
                        <img class="display-pic" src="../../../public/images/user_profile/Grock.jpg" alt="pfp.jpg">
                        <div class="heading"> <a href="../userProfiles/Grock.html">Grock</a> </div>
                        <div class="star-rating"><img class="star-icon-review" src="../../../public/icons/star.png" alt="star icon"> 4.0 </div>
                        <div class="description">WHEN I LEFT UR STALL AND ATE UR FOOD i was blown away IT WAS THE BEST THING THAT WHOLE YEAR AND IVE CRAVED IT EVERY YEAR SINCE
                        </div>
                        <div class="date">Aug 88, 2021 12:12</div>
                        <div class="edited">edited</div>
                        <div class="vote">
                            <button class="upvote">
                                <i class="fa-solid fa-up-long"></i>
                            </button>
                            <button class="downvote">
                                <i class="fa-solid fa-down-long"></i>
                            </button>
                        </div>
                    </div>
                </article>

            </section>
        </div>

        <div class="tabs__content" data-tab="2">
            <div class="menu-tab">
                <img class="menu-img" src = "../../../public/images/resto_menu/baconoki_menu.png" alt="establishment menu">
            </div>
        </div>

        <div class="tabs__content" data-tab="3">
            <div class="photos-container">
                <div class="photo-gallery">
                    <div class="column">
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/beefchop_noodle.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/yellow.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/colonel_curry.jpg" alt="beefchop_noodle image">
                        </div>
                    </div>

                    <div class="column">
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/indian_foodjpg.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/lasare_food.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/24chicken_sweetcorn.jpg" alt="beefchop_noodle image">
                        </div>
                    </div>

                    <div class="column">
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/panda_siopao.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/cat.jpg" alt="beefchop_noodle image">
                        </div>
                        <div class="photo">
                            <img src="../../../public/images/image_gallery/egg.jpg" alt="beefchop_noodle image">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../../public/scripts/profileModal.js"></script>
    <script>
        let data = [
            {
                'star': 5,
                'count': 1,
            },
            {
                'star': 4,
                'count': 0,
            },
            {
                'star': 3,
                'count': 0,
            },
            {
                'star': 2,
                'count': 0,
            },
            {
                'star': 1,
                'count': 0,
            }
        ]

        let total_rating = 0;
        let star_total_rating = 0;
         data.forEach(rating => {
            total_rating += rating.count;
            star_total_rating += rating.count * rating.star;
        });

        data.forEach(rating => {
            let rating__progress = `
                 <div class="rating__progress-value">
                            <p> ${rating.star} <span class="star"> &#9733;</span> </p>
                            <div class="progress">
                                <div class="bar" style="width: ${(rating.count / total_rating) * 100}%;"></div>
                            </div>
                            <p>${rating.count.toLocaleString()}</p>
                </div>
                `;

            document.querySelector('.rating__progress').innerHTML += rating__progress;
        });

        document.querySelector('.rating__average p').innerHTML = total_rating.toLocaleString();

        let star_rating_average = (star_total_rating / total_rating).toFixed(1);
        document.querySelector('.rating__average h1').innerHTML = star_rating_average.toLocaleString();

        let star_display_average = (star_rating_average / 5) * 100;
        document.querySelector('.star-inner').style.width = star_display_average + "%";
    </script>

    <script>
        function setupTabs () {
            document.querySelectorAll(".tabs__button").forEach(button => {
                button.addEventListener("click", () => {
                    const sideBar = button.parentElement;
                    const tabsContainer = sideBar.parentElement;
                    const tabNumber = button.dataset.forTab;
                    const tabToActivate  = tabsContainer.querySelector(`.tabs__content[data-tab="${tabNumber}"]`);

                    console.log(sideBar);
                    console.log(tabsContainer);
                    console.log(tabNumber);
                    console.log(tabToActivate);

                    sideBar.querySelectorAll(".tabs__button").forEach(button => {
                        button.classList.remove("tabs__button--active");
                    });

                    tabsContainer.querySelectorAll(".tabs__content").forEach(tab => {
                        tab.classList.remove("tabs__content--active");
                    });

                    button.classList.add("tabs__button--active");
                    tabToActivate.classList.add("tabs__content--active");
                });
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            setupTabs();

            document.querySelectorAll(".establishment-tabs").forEach(tabsContainer => {
                tabsContainer.querySelector(".tabs__sidebar .tabs__button").click();
            });
        });

    </script>

</main>
</body>
</html>